<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      WrapAPI Beginner's Tutorial: Build an Image Comics Release Tracker : seth.blog
    
  </title>

  <!-- meta info -->
  
  <meta name="description" content="An intro to using WrapAPI to build a tracker displaying Image comics released during a selected week." />
  
  
  <meta name="keywords" content="seth dehaan, author, web design, development, video, games, jekyll, blog, atom" />
  
  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- fontawesome icons & open sans & jets -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/hover.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800,700" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" src="/jquery.fancybox.pack.js"></script>
  <link rel="stylesheet" type="text/css" href="/jquery.fancybox.min.css" media="screen" />
  <script src="/jets.min.js"></script>

  <!-- favicons -->
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#333333">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="seth.blog" href="/atom.xml">

</head>


  <body>

    <header class="masthead">
      <div id="videoHeader">
        <video loop="loop" autoplay="autoplay" poster="/assets/night_sky.jpeg">
          <source src="/assets/stars.mp4" type="video/mp4">
        </video>
      </div>
      <div id="mastheadText">
        <h1 class="masthead-title">
          <a class="hvr-grow" href="/" title="Home">seth.blog</a>
        </h1>
        <nav id="nav">
          
            &nbsp;&nbsp;&nbsp;
            <a href="/about">About</a>
          
            &nbsp;&nbsp;&nbsp;
            <a href="/archive">Archive</a>
          
            &nbsp;&nbsp;&nbsp;
            <a href="/projects">Projects</a>
          
            &nbsp;&nbsp;&nbsp;
            <a href="/atom.xml">Feed</a>
          
        </nav>
      </div>
    </header>

    <div class="container content">

      <main>
        <article class="post">
  <ul class="index-data">
    <li><time datetime="2016-06-01T11:30:00-05:00" class="post-date">01 Jun 2016</time></li>
    <li> : <a href="/tags/#webdev">webdev</a>, <a href="/tags/#tutorial">tutorial</a></li>
  </ul>
  <h1 class="post-title">WrapAPI Beginner's Tutorial: Build an Image Comics Release Tracker</h1>

  <p>With the right API, you can build an app to solve almost any problem. But what if there’s no API available? <a href="http://www.wrapapi.com">WrapAPI</a> allows you to make your own, and in this tutorial I’ll walk you through the first project I built with it.</p>

<p><strong>Required skills:</strong> Intermediate HTML and JS</p>

<p>A few months ago, I had to make a difficult decision: buy more long boxes, or stop buying single issue comics. If you’re a comics fan, you know the struggle. For me, especially considering I’ll be moving out of state in a few week, it made a lot more sense to cut the cord and stop buying single issues (apologies to all my favorite writers).</p>

<p>Now, I pretty much only read titles from <a href="http://www.imagecomics.com">Image</a>. I’m still a fan, so I want to keep up on my favorite series by picking up the trade paperbacks when they come out. But I follow too many authors to make that a simple task. <strong>The problem: I want the quickest way to see at a glance which trades are coming out on any given week.</strong> The solution? Well, I couldn’t find a simple, clean one I really liked. I tried following releases on Amazon or <a href="http://www.tfaw.com">TFAW</a>, or watching release dates on Image’s site, but all the methods I tried took too many clicks and didn’t put the information I wanted right in front of me.</p>

<h2 id="enter-wrapapi-the-all-in-one-api-builder">Enter WrapAPI, the all-in-one API builder</h2>

<p>With WrapAPI, you can define forms or data on a website and capture those elements. Image Comics’ website, for example, has a section featuring upcoming comics at URLs like this: <a href="http://www.imagecomics.com/comics/upcoming-releases/2016/6">http://www.imagecomics.com/comics/upcoming-releases/2016/6</a>. This page features all the comics releasing in June, 2016. WrapAPI can use the structure of this URL to gather data for any selected month Image currently has a page for (you can only see upcoming releases as far ahead as they have them announced).</p>

<p>To start building the API, install the WrapAPI Chrome extension, which adds a tab to dev tools. Load the page, open dev tools, and click over to the WrapAPI tab. Log into WrapAPI, click <strong>Start capturing requests</strong>, and reload the page to see this screen:</p>

<p><img src="/assets/wrapapi-intro.png" alt="WrapAPI initial load" class="center-image" /></p>

<p>The selection we want is the plain HTML data, so click the URL and then click <strong>Save to API endpoint</strong>.</p>

<p>Now, log into your account on WrapAPI, and the next step is to define those inputs in the URL for year and month under the <strong>Inputs and request</strong> tab as shown below:</p>

<p><img src="/assets/wrapapi-inputs.png" alt="wrapapi input fields" class="center-image" /></p>

<p>By defining these inputs, you’re building an API that can check upcoming releases for any month in any year. Not half bad! The next step is to test those inputs, so click over to the <strong>Outputs and response</strong> tab to add a test case. Let’s see if we can pull up releases for June, 2016 using the following test inputs:</p>

<p><img src="/assets/wrapapi-testcase.png" alt="wrapapi test case" class="center-image" /></p>

<p>This should return a 200 response and show a preview of the full page. Save this test case and return to the main page. Now the fun begins! This is the info for each comic we want to capture from the page:</p>

<ul>
  <li>Title</li>
  <li>URL for that comic’s page</li>
  <li>Image URL</li>
  <li>Release date</li>
  <li>Writer</li>
  <li>Artist</li>
  <li>Cover artist</li>
</ul>

<p>WrapAPI offers a few different ways to extract data from a page, but we’re going to use CSS classes for this project. Still on the same tab, click <strong>Add a new output scenario</strong>, then <strong>Add output to extract data</strong> and choose <strong>CSS selector</strong>.</p>

<p>If you’ve used the dev tools inspector, WrapAPI’s selector tool will be familiar. We’ll start by identifying where the comic titles appear. Click a title in the preview window and you should see something like this:</p>

<p><img src="/assets/wrapapi-titlegrab.png" alt="WrapAPI using CSS selector" class="center-image" /></p>

<p>The element you originally clicked is highlighted in green, and all similar elements are highlighted in yellow. If elements are highlighted that don’t match, click them to refine the selection. In the image above, you can see the comic title is displayed as the anchor text of a link inside a paragraph with the class <code class="highlighter-rouge">book__headline</code>.</p>

<p>You can use a few other options to further refine your selection:</p>

<p><img src="/assets/wrapapi-options.png" alt="wrapapi options" class="center-image" /></p>

<p>For this project, make sure to check <strong>Select all into an array</strong>, so you get data for all the comics on the page. You also choose to grab the plain text or attributes from an element. For example, for the URL of the comic’s page you’ll want to select the <code class="highlighter-rouge">href</code> attribute from the title’s link.</p>

<p>Once you’ve identified all the data you want, you’re ready to publish! Head over to the <strong>View and use API element</strong> tab and click Publish. Generate an API key to use and you’ll be ready to build the app.</p>

<p>We’re using a pretty basic structure. All we need in the HTML is:</p>

<ul>
  <li>A datepicker</li>
  <li>An empty div to display the comics</li>
</ul>

<p>You can <a href="https://github.com/sethxd/image-release-tracker/">check the repo</a> to see how I put it together. The HTML is straightforward, but the JS is where it gets complicated.</p>

<p>We’ll start off the <code class="highlighter-rouge">index.js</code> file by just declaring a few variables:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="s1">'https://wrapapi.com/use/sethxd/image/upcoming/0.1.0?wrapAPIKey=YOUR_API_KEY'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">html</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p><code class="highlighter-rouge">main</code> is the URL for your API + key, and you’ll see how the others are used in a minute.</p>

<p>I used <a href="http://amsul.ca/pickadate.js/">pickadate.js</a> for the datepicker, but most other options should work fine.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">"#datepicker"</span><span class="p">).</span><span class="nx">pickadate</span><span class="p">({</span>
    <span class="na">disable</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span>
    <span class="p">],</span>
    <span class="na">format</span><span class="p">:</span> <span class="s1">'mm/dd/yyyy'</span>
<span class="p">});</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Since comics release on Wednesday, we can use pickadate’s options to block the user from choosing any other day of the week. You also format the output to match the dates listed on Image’s site.</p>

<p>We want to load comics whenever someone picks a date, so we use jquery to run our function when the datepicker’s value changes:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">"#datepicker"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"change"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">html</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">".upcoming-comics"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">"&lt;i class='fa fa-spinner fa-spin'&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Loading..."</span><span class="p">);</span>
      <span class="nx">date</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">"0"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">main</span> <span class="o">+</span> <span class="s2">"&amp;year="</span> <span class="o">+</span> <span class="nx">year</span> <span class="o">+</span> <span class="s2">"&amp;month="</span> <span class="o">+</span> <span class="nx">month</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This first part of the function just displays a loading spinner and formats the date so we can add our two inputs (<code class="highlighter-rouge">month</code> and <code class="highlighter-rouge">year</code>) to the API call.</p>

<p>Next, the API call itself!</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">books</span> <span class="o">=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">book</span><span class="p">;</span>
  <span class="nx">books</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">alpha</span><span class="p">);</span></pre></td></tr></tbody></table></code></pre></figure>

<p>First, we’re just narrowing the API call results and sorting them alphabetically using this function:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="kd">function</span> <span class="nx">alpha</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">title</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">title</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now we’re going to use another library called <a href="http://momentjs.com/">moment.js</a> to manipulate dates. Remember, the API call is pulling the comics released for <strong>the whole month</strong>, but we only want to display those for a selected week. I know there are edge cases where comics release on Tuesday or Thursday, so we want to account for those too.</p>

<p>Using the JS <code class="highlighter-rouge">map</code> function, we’re going to run over every comic in the array and check its release date. If it matches the selected date +/- 1, we want to display it:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nx">books</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">formatDate</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">date</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s2">"MM/DD/YYYY"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">formatDate</span> <span class="o">==</span> <span class="nx">date</span> <span class="o">||</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">formatDate</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s1">'days'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">date</span> <span class="o">||</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">formatDate</span><span class="p">).</span><span class="nx">subtract</span><span class="p">(</span><span class="s1">'days'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">date</span><span class="p">)</span> <span class="p">{</span></pre></td></tr></tbody></table></code></pre></figure>

<p>We’re going to use a flexbox layout to display our results, so now for each comic that meets those date requirements we just need to add a div with all the data, and the class <code class="highlighter-rouge">flex-item</code>, to our html, like so:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nx">html</span> <span class="o">+=</span> <span class="s1">'&lt;div style="background: url('</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">img</span> <span class="o">+</span> <span class="s1">')" class="flex-item"&gt;&lt;div class="caption"&gt;&lt;p&gt;&lt;span class="title"&gt;&lt;a target="blank" href="https://imagecomics.com'</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'"&gt;&lt;strong&gt;'</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">'&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;br&gt;'</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">date</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;W: '</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">writer</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;A: '</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">artist</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;C: '</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">cover</span> <span class="o">+</span> <span class="s1">'&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;'</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Before we display our results, we should account for the possibility that our API call fails, and the <code class="highlighter-rouge">html</code> variable ends up empty at the end of this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">html</span> <span class="o">!==</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">".upcoming-comics"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">".upcoming-comics"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Sorry, no results found."</span><span class="p">);</span>
<span class="p">}</span></pre></td></tr></tbody></table></code></pre></figure>

<p>At this point, the bones of the app should be functional. We just need to dress it up with some CSS. This is what I did for the container and comics tiles:</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="code"><pre><span class="nc">.upcoming-comics</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-flex</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">100%</span><span class="p">;</span>
  <span class="nl">padding-top</span><span class="p">:</span><span class="m">30px</span><span class="p">;</span>
  <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">padding-bottom</span><span class="p">:</span><span class="m">30px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* The container is just a straightforward flex container */</span>

<span class="nc">.flex-item</span> <span class="p">{</span>
  <span class="nl">text-align</span><span class="p">:</span><span class="nb">center</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span><span class="m">10px</span><span class="p">;</span>
  <span class="nl">background-size</span><span class="p">:</span> <span class="n">cover</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">background-repeat</span><span class="p">:</span> <span class="nb">no-repeat</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* We want a fixed size for tiles so the cover displays correctly */</span>

<span class="nc">.caption</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span><span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span><span class="m">0.9em</span><span class="p">;</span>
  <span class="nl">bottom</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">100%</span><span class="p">;</span>
  <span class="nl">opacity</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">100%</span><span class="p">;</span>
		<span class="nl">-webkit-transition</span><span class="p">:</span><span class="n">all</span> <span class="m">0.15s</span> <span class="n">ease-in-out</span><span class="p">;</span>
		<span class="nl">-moz-transition</span><span class="p">:</span><span class="n">all</span> <span class="m">0.15s</span> <span class="n">ease-in-out</span><span class="p">;</span>
		<span class="nl">-o-transition</span><span class="p">:</span><span class="n">all</span> <span class="m">0.15s</span> <span class="n">ease-in-out</span><span class="p">;</span>
		<span class="nl">-ms-transition</span><span class="p">:</span><span class="n">all</span> <span class="m">0.15s</span> <span class="n">ease-in-out</span><span class="p">;</span>
		<span class="nl">transition</span><span class="p">:</span><span class="n">all</span> <span class="m">0.15s</span> <span class="n">ease-in-out</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* The caption contains all the data, and is invisible until the user
hovers over the tile */</span>

<span class="nc">.caption</span> <span class="nt">p</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">50%</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span><span class="m">10px</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span><span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">bottom</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">100%</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span><span class="no">white</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span><span class="nb">center</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.8</span><span class="p">);</span>
  <span class="nl">margin</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.caption</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.caption</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">opacity</span><span class="p">:</span><span class="m">1</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">90%</span><span class="p">;</span>
<span class="p">}</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now, one of the reasons I originally wanted to build this was to see not just which comics are releasing, but which trade paperbacks / collected editions are coming out. I noticed on Image’s site that most of these items have the characters “TP” or “HC” at the end of their titles.</p>

<p>We can add a few lines of code to our function (I placed it with the date checking) to snag the two characters at the end of a title:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="kd">let</span> <span class="nx">formatDate</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">date</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s2">"MM/DD/YYYY"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">lastTwo</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then we add an <code class="highlighter-rouge">if</code> statement to the part of our code that generates the html. If that variable <code class="highlighter-rouge">lastTwo</code> is equal to “TP” or “HC”, we add the class <code class="highlighter-rouge">collected</code> to that flex item. If not, we add the class <code class="highlighter-rouge">single</code>.</p>

<p>After that, it’s simple to add a checkbox option to only show trades, and if it’s checked add a <code class="highlighter-rouge">hidden</code> class to all single issues:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'.trades-check'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"change"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.trades-check'</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.single'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'hidden'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.single'</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">'hidden'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})</span></pre></td></tr></tbody></table></code></pre></figure>

<p>With that, you should have a working app that does exactly what it says on the tin!</p>

<p>The one thing I’ve been struggling with is getting the pickadate object to work on mobile. I’ve found a few different possible solutions online, but nothing seems to work. If you have an answer, drop me a line or comment below and let me know!</p>

</article>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'sethxd';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<br />

      </main>

      <footer class="footer">
        <div class="social">
          <a class="hvr-grow" target="_blank" href="http://www.github.com/sethxd"><i class="fa fa-github fa-2x fa-fw"></i></a>
          <a class="hvr-grow" target="_blank" href="http://twitter.com/sethdehaan"><i class="fa fa-twitter fa-2x fa-fw"></i></a>
          <a class="hvr-grow" href="mailto:seth.dehaan@gmail.com"><i class="fa fa-envelope-o fa-2x fa-fw"></i></a>
          <a class="hvr-grow" target="_blank" href="https://www.youtube.com/channel/UCZvJ3jMBROUbnybIQ5bsdvw"><i class="fa fa-youtube fa-2x fa-fw"></i></a>
        </div>
        <small>
          Seth DeHaan &copy; <span>2018</span>. All rights reserved.
        </small>
      </footer>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68510434-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type"text/javascript" src="https://assets.gfycat.com/gfycat.js"></script>

    <script type="text/javascript">
	$(document).ready(function() {
		$(".fancybox").fancybox();
	});
</script>


  </body>
</html>
